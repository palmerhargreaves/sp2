<?php

/**
 * Description of ValidatorFile
 *
 * @author Сергей
 */
class ValidatorFile extends sfValidatorFile
{
    private $_allow_to_upload_ms_files = true;
    private $_allow_to_upload_audio_video_false = true;

    protected function configure($options = array(), $messages = array())
    {
        parent::configure($options, $messages);

        $this->addOption('mime_type_guessers', array(
            array('F', 'getFileMimeType'),
            array($this, 'guessFromFileinfo'),
            array($this, 'guessFromMimeContentType'),
            array($this, 'guessFromFileBinary'),
        ));
    }

    protected function checkMimeForExcel($mimeType)
    {
        if ($this->_allow_to_upload_ms_files) {
            return parent::checkMimeForExcel($mimeType); // TODO: Change the autogenerated stub
        }

        return $this->_allow_to_upload_ms_files;
    }

    protected function checkMimeForAudioVideo($mimeType) {
        if ($this->_allow_to_upload_audio_video_false) {
            return parent::checkMimeForAudioVideo($mimeType);
        }

        return $this->_allow_to_upload_audio_video_false;
    }

    /**
     * @param bool $allow | If true allow to upload files
     */
    public function allowOrDisallowToUploadTextFiles($allow = true) {
        $this->_allow_to_upload_ms_files = $allow;
    }

    /**
     * @param bool $allow | if true allow to upload files
     */
    public function allowOrDisallowToUploadAudioVideo($allow = true) {
        $this->_allow_to_upload_audio_video_false = $allow;
    }

}
